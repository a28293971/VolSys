<div class="user-table-container" [@flyIn]="'active'">
  <div class="compoment-backgroud">
    <br/>
    <h3 style="text-align: center">{{actName}}</h3>
    <br/>
    <div class="content-section implementation" style="padding-left: 1.25rem;padding-right: 1.25rem;">
      <div>
        <p>志愿时间：{{actVolunteerTime}}</p>
      </div>
      <p-table #dt [value]="membersWaiting" [(selection)]="selectedMembers" [globalFilterFields]="['id','name','timestamp']"
      [paginator]="true" [rows]="10" paginatorPosition="top" [rowsPerPageOptions]="[10,15,25,50]">
        <ng-template pTemplate="caption">
          <div style="text-align:left;float: left;">
            <button type="button" style="padding-top: 0.25rem;padding-bottom: 0.1875rem;float: left;" class="btn btn-info" routerLink="/workspace/apr/list">
              <i class="fa fa-angle-left"></i>
              返回
            </button>
            <button type="button" style="padding-top: 4px;padding-bottom: 3px;margin-left: 1.5625rem;" 
            class="btn btn-success" (click)="aprMutileMeb()">
              <i class="fa fa-check"></i>
              批量审批通过
            </button>
            <button type="button" style="padding-top: 4px;padding-bottom: 3px;margin-left: 1.5625rem;" 
            class="btn btn-danger" (click)="rejMutileMeb()">
              <i class="fa fa-close"></i>
              批量拒绝通过
            </button>
          </div>
          <div style="text-align:right;">
            <i class="fa fa-search" style="margin:4px 4px 0 0"></i>
            <input type="text" size="50" placeholder="Global Filter" 
            (input)="dt.filterGlobal($event.target.value, 'contains')" style="width:auto">
          </div>
        </ng-template>
        <ng-template pTemplate="header">
          <tr>
            <th style="width: 2.25em">
              <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
            </th>
            <th>Id</th>
            <th>Name</th>
            <th>AplTime</th>
            <th></th>
            <th>Opt</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-rowData>
          <tr *ngIf="!rowData.hide" [pSelectableRow]="rowData">
            <ng-container >
              <td>
                <p-tableCheckbox [value]="rowData" *ngIf="rowData.status==0"></p-tableCheckbox>
              </td>
              <td>{{rowData.id}}</td>
              <td>{{rowData.name}}</td>
              <td>{{rowData.timestamp | date: 'yyyy-MM-dd hh:mm a'}}</td>
              <td>
                <input required name="vt" [(ngModel)]="rowData.ratio" #vt="ngModel" type="number" style="width: 5em;float: left;color: #000;"
                value="1" min="0" max="1" step="0.1" [disabled]="rowData.status!=0">
                <div style="width:4em;float: left;margin: 0.3125em;color: #000;" >{{actVolunteerTime*rowData.ratio | number: '1.0-2'}}</div>
                <input type="number" style="width: 5em;float: left;" value="1" min="0" max="1" step="0.1" [disabled]="rowData.status!=0">
                <div style="width:4em;float: left;margin: 0.3125em;">0</div>
              </td>
              <td>
                <button type="button" class="btn btn-success" (click)="vt.valid&&aprSingleMeb(rowData)" [disabled]="rowData.status!=0">审批通过</button>
                <button type="button" class="btn btn-danger" (click)="rejSingleMeb(rowData)" [disabled]="rowData.status!=0">拒绝通过</button>
              </td>
            </ng-container>
          </tr>
        </ng-template>
        <ng-template pTemplate="summary">
          <ul>
            <li *ngFor="let mb of selectedMembers" style="text-align: left">
              {{mb.id + ' - ' + mb.name}}
            </li>
          </ul>
        </ng-template>
      </p-table>
    </div>
    <br/>
    <div class="content-section implementation" style="padding-left: 1.25rem;padding-right: 1.25rem;">
      <p-table [value]="membersDone" [paginator]="true" [rows]="10" paginatorPosition="top" [rowsPerPageOptions]="[10,15,25,50]">
        <ng-template pTemplate="header"> 
          <tr>
            <th>Id</th>
            <th>Name</th>
            <th>OptTime</th>
            <th></th>
            <th>Opt</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-rowData>
          <tr [pSelectableRow]="rowData">
            <td>{{rowData.id}}</td>
            <td>{{rowData.name}}</td>
            <td>{{rowData.timestamp | date: 'yyyy-MM-dd hh:mm a'}}</td>
            <td>
              <input type="number" style="width: 5em;float: left;" [value]="rowData.ratio" disabled="true">
              <div style="width:4em;float: left;margin: 0.3125em;" >{{rowData.volunteer_time | number: '1.0-2'}}</div>
              <input type="number" style="width: 5em;float: left;" value="1" disabled="true">
              <div style="width:4em;float: left;margin: 0.3125em;">0</div>
            </td>
            <td>
              <button *ngIf="rowData.status==1" type="button" class="btn btn-success" disabled="true">审批已通过</button>
              <button *ngIf="rowData.status==2" type="button" class="btn btn-danger" disabled="true">审批未通过</button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
    <br/><br/>
  </div>
</div>